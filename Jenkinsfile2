pipeline {
    agent any
    triggers {
        pollSCM('* * * * *')
    }
    stages {
    stage('Install') {
        
      steps {  bat """
                         c:
                         cd \"C:\\Users\\gabyz\\OneDrive\\Documents\\GitHub\\Practica3_AyD1_G9\\Cliente\\GiftcardApp"
                         npm install
                         """ }
    }
     stage('Unit tests') {
            steps { 
                    bat """
                         c:
                         cd \"C:\\Users\\gabyz\\OneDrive\\Documents\\GitHub\\Practica3_AyD1_G9\\Cliente\\GiftcardApp"
                         npm run ng test
                         """
                    }
        }

    stage('Build') {
            steps { 
                    bat """
                         c:
                         cd \"C:\\Users\\gabyz\\OneDrive\\Documents\\GitHub\\Practica3_AyD1_G9\\Cliente\\GiftcardApp"
                         npm run ng build
                         """
                    }
        }
        
    
  }
  post {
            always {
                mail to: 'gaby.z7guate@gmail.com',
                subject: "Se completo el pipeline de la practica",
                body: "Se ha terminado la compilación, porfavor revisa: ${env.BUILD_URL}"
            }
            failure{
                mail to: 'gaby.z7guate@gmail.com',
                subject: "Se completo el pipeline de la practica",
                body: "Se ha terminado la compilación, porfavor revisa: ${env.BUILD_URL}. El pipeline fallo"
            }
        }
}
